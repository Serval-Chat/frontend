@theme {
    /* Theme-agnostic variables */
    --spacing: 0.25rem;
    --spacing-xs: calc(var(--spacing) * 1);
    --spacing-sm: calc(var(--spacing) * 2);
    --spacing-md: calc(var(--spacing) * 4);
    --spacing-lg: calc(var(--spacing) * 6);
    --spacing-xl: calc(var(--spacing) * 8);

    --max-width-xs: 20rem;
    --max-width-sm: 24rem;
    --max-width-md: 28rem;
    --max-width-lg: 32rem;
    --max-width-xl: 36rem;
    --max-width-2xl: 42rem;
    --max-width-3xl: 48rem;
    --max-width-4xl: 56rem;
    --max-width-5xl: 64rem;
    --max-width-6xl: 72rem;
    --max-width-7xl: 80rem;

    --font-sans: 'Noto Sans', system-ui, -apple-system, Roboto, sans-serif;
    --font-mono: 'Fira Code', 'Courier New', monospace;

    --shadow-sm: 0 1px 2px 0 rgb(0 0 0 / 0.3);
    --shadow-md: 0 4px 6px -1px rgb(0 0 0 / 0.4);
    --shadow-lg: 0 10px 15px -3px rgb(0 0 0 / 0.4);

    --radius-sm: 0.25rem;
    --radius-md: 0.5rem;
    --radius-lg: 0.75rem;

    --z-negative: -1;
    --z-base: 0;
    --z-effect-sm: 5;
    --z-effect-md: 6;
    --z-effect-lg: 7;
    --z-content: 10;
    --z-dropdown: 1000;
    --z-sticky: 1010;
    --z-fixed: 1020;
    --z-backdrop: 1030;
    --z-modal: 1040;
    --z-popover: 1050;
    --z-toast: 1060;
    --z-tooltip: 1070;
    --z-top: 9999;

    --color-primary: var(--primary);
    --color-primary-hover: var(--primary-hover);
    --color-danger: var(--danger);
    --color-danger-hover: var(--danger-hover);
    --color-caution: var(--caution);
    --color-caution-hover: var(--caution-hover);
    --color-success: var(--success);
    --color-success-hover: var(--success-hover);
    --color-primary-muted: var(--primary-muted);
    --color-primary-muted-text: var(--primary-muted-text);
    --color-danger-muted: var(--danger-muted);
    --color-danger-muted-text: var(--danger-muted-text);
    --color-caution-muted: var(--caution-muted);
    --color-caution-muted-text: var(--caution-muted-text);
    --color-success-muted: var(--success-muted);
    --color-success-muted-text: var(--success-muted-text);
    --color-background: var(--background);
    --color-foreground: var(--foreground);
    --color-foreground-inverse: var(--foreground-inverse);
    --color-muted-foreground: var(--muted-foreground);
    --color-muted-foreground-hover: var(--muted-foreground-hover);
    --color-border-subtle: var(--border-subtle);
    --color-bg-subtle: var(--bg-subtle);
    --color-bg-secondary: var(--bg-secondary);
    --color-placeholder: var(--placeholder);
    --color-divider: var(--divider);

    --tertiary-bg: var(--background);
    --secondary-bg: var(--background);
    --bg-chat-header: var(--background);
    --chat-bg: var(--local-chat-bg);
    --primary-bg: var(--local-primary-bg);
    --bg-msg-input: var(--background);
}

.theme-serval {
    --primary: hsl(45 100% 50%);
    --primary-hover: hsl(45 100% 40%);
    --danger: hsl(15 90% 55%);
    --danger-hover: hsl(15 90% 45%);
    --caution: hsl(30 95% 60%);
    --caution-hover: hsl(30 95% 50%);
    --success: hsl(80 70% 40%);
    --success-hover: hsl(80 70% 30%);
    --primary-muted: hsl(45 100% 15%);
    --primary-muted-text: hsl(45 100% 70%);
    --danger-muted: hsl(15 90% 15%);
    --danger-muted-text: hsl(15 90% 70%);
    --caution-muted: hsl(30 95% 15%);
    --caution-muted-text: hsl(30 95% 70%);
    --success-muted: hsl(80 70% 15%);
    --success-muted-text: hsl(80 70% 70%);
    --background: #2e1d13;
    --foreground: #fffbf0;
    --foreground-inverse: #000000;
    --muted-foreground: #bcaaa4;
    --muted-foreground-hover: #e6dedb;
    --border-subtle: rgb(255 190 0 / 0.2);
    --bg-subtle: rgb(255 190 0 / 0.08);
    --bg-secondary: rgb(255 190 0 / 0.12);
    --placeholder: rgb(188 170 164 / 0.4);
    --divider: rgb(255 190 0 / 0.15);

    /* Local overrides for layout bits */
    --local-chat-bg: color-mix(in srgb, black 25%, var(--bg-secondary));
    --local-primary-bg: color-mix(in srgb, black 25%, var(--bg-secondary));
}

.theme-dark {
    --primary: hsl(210 100% 60%);
    --primary-hover: hsl(210 100% 50%);
    --danger: hsl(0 85% 60%);
    --danger-hover: hsl(0 85% 50%);
    --caution: hsl(35 90% 60%);
    --caution-hover: hsl(35 90% 50%);
    --success: hsl(142 70% 55%);
    --success-hover: hsl(142 70% 45%);
    --primary-muted: hsl(210 100% 12%);
    --primary-muted-text: hsl(210 100% 75%);
    --danger-muted: hsl(0 85% 12%);
    --danger-muted-text: hsl(0 85% 75%);
    --caution-muted: hsl(35 90% 12%);
    --caution-muted-text: hsl(35 90% 75%);
    --success-muted: hsl(142 70% 12%);
    --success-muted-text: hsl(142 70% 75%);
    --background: #0f172a;
    /* Slate 950 */
    --foreground: #f8fafc;
    /* Slate 50 */
    --foreground-inverse: #ffffff;
    --muted-foreground: #94a3b8;
    /* Slate 400 */
    --muted-foreground-hover: #cbd5e1;
    /* Slate 300 */
    --border-subtle: rgba(255, 255, 255, 0.1);
    --bg-subtle: rgba(255, 255, 255, 0.05);
    --bg-secondary: rgba(255, 255, 255, 0.08);
    --placeholder: rgba(255, 255, 255, 0.2);
    --divider: rgba(255, 255, 255, 0.1);

    --local-chat-bg: color-mix(in srgb, black 30%, var(--background));
    --local-primary-bg: color-mix(in srgb, black 30%, var(--background));
}

.theme-light {
    --primary: hsl(210 100% 45%);
    --primary-hover: hsl(210 100% 35%);
    --danger: hsl(0 85% 55%);
    --danger-hover: hsl(0 85% 45%);
    --caution: hsl(35 90% 55%);
    --caution-hover: hsl(35 90% 45%);
    --success: hsl(142 70% 40%);
    --success-hover: hsl(142 70% 30%);
    --primary-muted: hsl(210 100% 95%);
    --primary-muted-text: hsl(210 100% 30%);
    --danger-muted: hsl(0 85% 95%);
    --danger-muted-text: hsl(0 85% 30%);
    --caution-muted: hsl(35 90% 95%);
    --caution-muted-text: hsl(35 90% 30%);
    --success-muted: hsl(142 70% 95%);
    --success-muted-text: hsl(142 70% 30%);
    --background: #ffffff;
    --foreground: #020617;
    --foreground-inverse: #ffffff;
    --muted-foreground: #64748b;
    --muted-foreground-hover: #475569;
    --border-subtle: rgba(0, 0, 0, 0.08);
    --bg-subtle: #f8fafc;
    --bg-secondary: #f1f5f9;
    --placeholder: rgba(0, 0, 0, 0.4);
    --divider: rgba(0, 0, 0, 0.05);

    --local-chat-bg: #fdfdfd;
    --local-primary-bg: #fdfdfd;
}

.theme-high-contrast {
    --primary: #ffff00;
    --primary-hover: #e6e600;
    --danger: #ff0000;
    --danger-hover: #cc0000;
    --caution: #ffa500;
    --caution-hover: #cc8400;
    --success: #00ff00;
    --success-hover: #00cc00;
    --primary-muted: #1a1a00;
    --primary-muted-text: #ffff00;
    --danger-muted: #1a0000;
    --danger-muted-text: #ff0000;
    --caution-muted: #1a1100;
    --caution-muted-text: #ffa500;
    --success-muted: #001a00;
    --success-muted-text: #00ff00;
    --background: #000000;
    --foreground: #ffffff;
    --foreground-inverse: #000000;
    --muted-foreground: #ffffff;
    --muted-foreground-hover: #ffffff;
    --border-subtle: #ffffff;
    --bg-subtle: #1a1a1a;
    --bg-secondary: #333333;
    --placeholder: #ffffff;
    --divider: #ffffff;

    --local-chat-bg: #000000;
    --local-primary-bg: #000000;
}
